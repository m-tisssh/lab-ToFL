# Описание лабортаорной работы №2

Этот код реализует **L\*-алгоритм** для построения полного описания конечного автомата. L\*-алгоритм применяется для построения автомата по языку, который распознается "МАТ". В свою очередь "МАТ" генерирует случайный автомат, соответствующий задаче, и реагирует на запросы об эквивалентности и включении.


## Вариация L* - осторожный L*

Для оптимизации алгортма был использован осторожный L\*.

Осторожный L\*-алгоритм — это модификация алгоритма L\*, который добавляет больше различающих суффиксов для получения корректного автомата. 

Если находятся противоречия при проверки эквивалентности, алгоритм добавляет различающие суффиксы и обновляет таблицу, пока не будет достигнута эквивалентность или пока не будут исчерпаны все варианты. 


## Тестирование

Угадыватель тестировался на МАТ, реализующий планарный лабиринт (для тестирования был взят МАТ Никиты Нащёкина, ИУ9-52Б)

L\*-алгоритм взаимодействует с сервером для выполнения двух типов запросов:
1. **Запрос проверки принадлежности слова языку (check_membership)** — для определения, является ли конкретное слово частью целевого языка.
2. **Запрос проверки эквивалентности (check_equivalence)** — для проверки, совпадает ли гипотеза автомата с целевой системой или есть различия.

Отправка POST-запроса в формате JSON для проверки /checkWord:

```json
{
    "word": "LLR"
}
```

В ответ вернётся JSON
```json
{
    "response": true
}
```

Отправка POST-запроса в формате JSON для проверки /checkTable:
```json
{
    {
  "main_prefixes": "ε L R RL RR",
  "non_main_prefixes": "LL LR RLL RLR RRL RRR",
  "suffixes": "...", 
  "table": " ..."
}
```

Также сервер может возвращать запрос со строкой, содержащей контрпример. Благодаря оптимизации добавляются различные суффиксы этой строки в таблицу. Это делается для того, чтобы учесть все подстроки контрпримера в последующих проверках, чтобы исключить их или лучше обработать.

#### Пример вывода из терминала
```bash
Updated table for 'RLRLR' with suffix 'L'
Request to checkTable: 200, b'{"response":"RRLR","type":true}\n'
Counterexample found: RRLR
Adding counterexample suffix: RRLR
Adding counterexample suffix: RLR
Adding counterexample suffix: LR
Adding counterexample suffix: R
```


## Режимы работы

Алгоритм поддерживает два режима работы:
1. **Автоматический режим с сервером** (при `server_mode=True`) — отправка запросов на сервер для проверки принадлежности и эквивалентности.
2. **Ручной режим** — если сервер отключен, алгоритм может работать в ручном режиме, где ответы должны быть даны пользователем, проверяя гипотезы самостоятельно.

Переключение режимов осуществляется через файл `parameters.json`.


## Файл `parameters.json`

Файл `parameters.json` содержит основные параметры для запуска алгоритма:
- `max_depth` — максимальная глубина слов, проверяемых в таблице наблюдений.
- `exit_count` — максимальное число итераций перед выходом из цикла.
- `server_mode` — задает режим работы (автоматический или ручной).


## Вывод данных

Данные таблицы наблюдений выводятся в консоль в структурированном виде после каждой итерации. Если эквивалентность достигнута, финальная таблица сохраняется с помощью функции `save_table_as_image`, которая сохраняет таблицу наблюдений в виде изображения. Это сделано для улучшения читаемости заполненной таблицы.


## Запуск алгоритма

Для запуска алгоритма выполните следующую команду:
```bash
python main.py

